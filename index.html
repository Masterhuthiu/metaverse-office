<head>
    <meta charset="utf-8" />
    <title>Metaverse Office Multiplayer</title>

    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>

    <script src="https://cdn.socket.io/4.7.5/socket.io.min.js"></script>

    <script src="https://unpkg.com/open-easyrtc@1.1.0/api/easyrtc.js"></script>

    <script src="https://unpkg.com/networked-aframe@0.12.0/dist/networked-aframe.min.js"></script>

    <script src="https://cdn.jsdelivr.net/gh/c-frame/aframe-extras@7.2.0/dist/aframe-extras.min.js"></script>
    <script
        src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>

    <script>
        // SỬA LỖI: Đăng ký schema kiểu mới, bỏ hẳn hàm getComponentsDataByTemplate gây lỗi
        // Chạy ngay lập tức khi script được load
        (function () {
            const schema = {
                template: '#avatar-template',
                components: [
                    'position',
                    'rotation'
                ]
            };
            // Cách đăng ký an toàn cho NAF 0.12.0
            if (typeof NAF !== 'undefined') {
                NAF.schemas.add(schema);
            } else {
                document.addEventListener('onConnect', () => NAF.schemas.add(schema));
            }
        })();
    </script>
</head>